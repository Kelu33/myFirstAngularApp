<form 
    (ngSubmit)="onSubmit()" (reset)="onReset()"
    [formGroup]="movieForm" #myForm="ngForm" 
    >
    <ng-container formGroupName="head">
        <div>
            <label for="head-identifier">Identifiant : </label>
            <input id="head-identifier" formControlName="identifier">
        </div>
        <div>
            <label for="head-title">Titre : </label>
            <input id="head-title" formControlName="title">
        </div>
    </ng-container>

    <div
        *ngIf="movieForm.controls['head'].errors && myForm.submitted"
        [ngStyle]="{'color': 'brown'}"
        >
        <p>L'un des deux champs 'Identifiant' ou 'Titre' doit être renseigné</p>
    </div>

    <div>
        <label for="types">Type : </label>
        <select id="types" formControlName="types">
            <option
                *ngFor="let t of typesList"
                [selected]="t === defaultType"
                [value]="t"
                >{{ t }}</option>
        </select>               
    </div>

    <div>
        <label for="releaseYear">Année de sortie : </label>
        <input
            type="number" 
            id="releaseYear"
            min="1899"
            formControlName="releaseYear"
            >
        <div 
            *ngIf="movieForm.controls['releaseYear'].errors && myForm.submitted"
            [ngStyle]="{'color': 'brown'}">
            <p>L'année doit être comprise entre {{ minYear }} et {{ currentYear }}</p>
        </div>
    </div>

    <div *ngIf="movieForm.get('head')?.get('identifier')?.value">
        <label for="sheets">Fiche : </label>
        <select id="sheets" formControlName="sheets">   
            <option
                *ngFor="let s of sheetsList"
                [selected]="s === defaultSheet"
                [value]="s"
                >{{ s }}</option>
        </select>
    </div>

    <div class="buttons-wrap">
        <button type="reset">Restaurer</button>
        <button type="submit">Sauvegarder</button>
    </div>

</form>

<div *ngIf="myForm.submitted">
    <p>Form valid ? {{movieForm.valid}}</p>
    <p>Form value: </p>
    <pre>{{ prettyJson(myForm.value) }}</pre>
</div>
