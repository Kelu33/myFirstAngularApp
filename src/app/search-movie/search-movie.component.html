<form
    (ngSubmit)="onSubmit()"
    (reset)="onReset()" 
    [formGroup]="movieForm"  
    #myForm="ngForm">

    <ng-container formGroupName="head">
        <div>
            <label for="head-identifier">Identifiant : </label>
            <input
                name="head-identifier" id="head-identifier"
                formControlName="identifier" >
        </div>
        <div>
            <label for="head-title">Titre : </label>
            <input name="head-title" id="head-title" formControlName="title" >
        </div>
    </ng-container>

    <div
        *ngIf="movieForm.controls['head'].errors && myForm.submitted"
        [ngStyle]="{'color': 'brown'}">
        L'un des deux champs 'Identifiant' ou 'Titre' doit être renseigné
    </div>

    <div>
        <label for="type-select">Type : </label>
        <select name="types" id="type-select" formControlName="types">
            <option
                *ngFor="let t of typesList"
                [selected]="t === defaultType"
                [value]="t"
            >{{ t }}</option>
        </select>               
    </div>

    <div>
        <label for="releaseYear">Année de sortie : </label>
        <input
            type="number" 
            id="releaseYear" 
            name="releaseYear"
            min="1899"
            formControlName="releaseYear">
        <div 
            *ngIf="movieForm.controls['releaseYear'].errors && myForm.submitted"
            [ngStyle]="{'color': 'brown'}">
            L'année doit être comprise entre {{ minYear }} et {{ currentYear }}
        </div>
    </div>
    
    <div *ngIf="movieForm.get('head')?.get('identifier')?.value">
        <label for="sheet-select">Fiche : </label>
        <select name="sheets" id="sheet-select" formControlName="sheets">   
            <option
                *ngFor="let s of sheetsList"
                [selected]="s === defaultSheet"
                [value]="s"
            >{{ s }}</option>
        </select>
    </div>

    <div class="buttons-wrap">
        <button type="reset">Restaurer</button>
        <button type="submit">Sauvegarder</button>
    </div>

  </form>

  <div *ngIf="myForm.submitted">
      <p>Form valid ? {{movieForm.valid}}</p>
      <p>Form value: </p>
      <pre>{{ prettyJson(myForm.value) }}</pre>
  </div>
